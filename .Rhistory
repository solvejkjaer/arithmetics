library(psychTestR)
library(htmltools)
library(psychTestR)
library(tibble)
library(shiny)
library(jspsychr)
library(dplyr)
version
install.packages("installr")
library(installr)
updateR()
?html_stimulus
library(htmltools)
library(psychTestR)
library(tibble)
library(shiny)
library(jspsychr)
library(dplyr)
library(tidyverse)
library(readxl)
# base_dir <- "/srv/shiny-server/experimento-TFM"
base_dir <- "/Users/Solvej/OneDrive - Aarhus Universitet/Alting/Lingvistik/Projekter/arithmetics_project/arithmetics/"
jspsych_dir <- file.path(base_dir, "jspsych-6-3-1")
write_to_file <- function(json_object,file_name,var_name=NULL){
if(is.null(var_name)){
write(json_object, file=file_name)
}else{
write(paste("var ",var_name,"= ", json_object), file=file_name)
}
}
stimuli<-read_excel(file.path(base_dir,"materiale.xlsx"))
long_stimuli <- stimuli %>%
pivot_longer(
cols = -c(item,sentence),
names_to = c(".value","condition"),
names_pattern = '(.+)_(.+)'
)
math_stim <- data.frame(long_stimuli,
fontsize="60pt",
lineheight="normal")
# write html definitions to the stimulus column
# note this could be added as a pipe to the above, setting df=.
math_stim$stimulus <- html_stimulus(df = math_stim,
html_content = "math",
html_element = "p",
column_names = c("fontsize","lineheight"),
css = c("font-size", "line-height"))
math_stim$sent_stim <- html_stimulus(df = math_stim,
html_content = "sentence",
html_element = "p",
column_names = c("fontsize","lineheight"),
css = c("font-size", "line-height"))
# create json object from dataframe
math_stim_json <- stimulus_df_to_json(df = math_stim,
stimulus = "stimulus",
data = c("sent_stim","math","answer","condition"))
# write json object to script
write_to_file(math_stim_json, file.path(base_dir, "test_stimuli.js"), "test_stimuli")
###############################
##### jsPsych starts here #####
###############
?html_stimulus
math_stim$stimulus <- html_stimulus(df = math_stim,
html_content = "math",
html_element = "p",
column_names = c("fontsize","lineheight"),
css = c("font-size", "line-height"),
id = "math")
math_stim$sent_stim <- html_stimulus(df = math_stim,
html_content = "sentence",
html_element = "p",
column_names = c("fontsize","lineheight"),
css = c("font-size", "line-height"),
id = "sentence")
# create json object from dataframe
math_stim_json <- stimulus_df_to_json(df = math_stim,
stimulus = "stimulus",
data = c("sent_stim","math","answer","condition"))
# write json object to script
write_to_file(math_stim_json, file.path(base_dir, "test_stimuli.js"), "test_stimuli")
###############################
##### jsPsych starts here #####
###############################
getwd()
base_dir
setwd(base_dir)
getwd
getwd()
shiny::runApp(".")
shiny::runApp(".")
getwd()
shiny::runApp(".")
shiny::runApp(".")
shiny::runApp(".")
shiny::runApp(".")
